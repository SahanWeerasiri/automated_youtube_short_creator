# README

## Project Overview

This project is a Python application.

## Project Structure

The project structure is as follows:

```
- .env
- .gitignore
- git_commit.py
- method.md
```

## Project Details

This project contains the following files:

- git_commit.py
### git_commit.py
The Python script `git_commit.py` automates the process of creating git commits using the Gemini API to generate commit messages based on the changes made in a git repository. Here's a breakdown:

1.  **Setup:**
    *   Loads environment variables from a `.env` file (specifically, it needs `GEMINI_API_KEY`).
    *   Defines a function `git_commit()` to handle the commit process.
    *   Handles the case where the script is not run inside of a git directory.

2.  **Git Operations:**
    *   Checks if the current directory is a git repository.
    *   Adds all changes to the staging area using `git add .`.
    *   Checks if there are actually any changes to commit (to avoid empty commits).

3.  **Diff Generation:**
    *   Creates a diff file named `diff.txt` containing the staged changes using `git diff --cached`. This diff file is the input to the Gemini API.

4.  **Gemini API Integration:**
    *   Reads the content of the `diff.txt` file.
    *   Constructs a request payload for the Gemini API, including the diff content and a prompt to generate a commit message.
    *   Sends a POST request to the Gemini API.
    *   Handles potential errors from the API call.
    *   Extracts the generated commit message from the API response.

5.  **Commit:**
    *   Commits the changes using `git commit -m <commit_message>`, using the commit message generated by the Gemini API.

6.  **Cleanup and Execution:**
    *   The main execution block (`if __name__ == "__main__":`) determines the target directory for the commit.  It defaults to the current working directory if no directory is provided as a command-line argument.
    *   Changes the current working directory to the target directory.
    *   Calls the `git_commit()` function.
    *   Removes the temporary `diff.txt` file.
    *   Changes the current working directory back to its original.
    *   Prints a "Commit successful." message.

In essence, this script streamlines git commits by automatically generating commit messages using AI, saving developers time and effort.  It takes a directory as input (or defaults to the current), stages all changes in that directory, uses the Gemini API to create a descriptive commit message based on the diff, commits the changes with that message, cleans up the temporary diff file, and restores the original working directory.


